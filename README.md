# param

[![Build Status](https://travis-ci.com/WillJCJ/param.svg?branch=master)](https://travis-ci.com/WillJCJ/param)

A cli tool for talking to AWS Parameter Store. Copy parameters directly to your clipboard.

- [Install](#install)
- [Usage](#usage)
- [Shell Completion](#shell-completion)
- [Docs](#docs)
- [Todo](#todo)

## Install

    go get github.com/willjcj/param

This should build a binary at `$GOPATH/bin/param`

Add `$GOPATH/bin` to your `PATH`, or move param to somewhere
already on your `PATH`.

## Usage

Make sure your terminal session has the correct AWS credentials.

### Copy

Copy a parameter to your clipboard:

    $ param copy parameter_name

You can optionally show the parameter value in your console with the `-v` flag:

	$ param copy parameter_name -v
	password123

### List

Get a sorted list of parameters in SSM with optional prefix(es):

    $ param list
    parameter.name.key
    parameter2.name.password
    ...

    $ param list -p prefix1,prefix2
    prefix1.dev.password
    prefix1.prod.password
    prefix2.key

## Shell Completion

`param completion` outputs shell completion code for the specified shell (`bash` or `zsh`).
The shell code must be evaluated to provide interactive completion of
param commands.
This can be done by sourcing it from `~/.bashrc` or `~/.zshrc`


### Installation

#### bash

Source the bash completion script every time you start a shell
by adding a line to your `~/.bashrc` file:

```bash
    printf "
    # param shell completion
    source <(param completion bash)
    " >> $HOME/.bashrc
    source $HOME/.bashrc
```

### Caching

Because the call to SSM can be quite slow, `param copy` caches the list of
parameter names by exporting an array named `PARAM_CACHE`.

You can clear the cache by unsetting the cache variable:
```bash
    unset PARAM_CACHE
```

You can stop caching entirely by setting the `PARAM_NO_CACHE` variable:

```bash
	export PARAM_NO_CACHE=1
```

## Docs

Docs for each command can be found at [`/docs`](docs/param.md)

They are automatically generated by Cobra.

## TODO

- Set command - Command to set parameters
- Delete command - Command to delete parameters
- Show command - Like `copy -v` without copying to clipboard
- `param copy` bash completion populated from `param list`
- Common SSM service instead of duplicated in all commands.
- Write tests!
- Write about how to set up AWS variables/profile.
- Add a flag to specify parameter type. Currently only works with `SecureString`s.
- `zsh` completion doesn't seem to work.
- Update or delete the bash completion cache after creating/deleting parameters
- Add bash completion for other subcommands and flags.
